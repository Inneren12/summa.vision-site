"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[210],{5046:function(e,t,r){r.d(t,{Qe:function(){return i}});let n=new Set(["1","yes","true"]),l=new Set(["viz_init","viz_ready","viz_error","viz_lazy_mount","viz_prefetch","viz_destroyed","viz_fallback_engaged","viz_data_mapped","viz_motion_mode","viz_spec_load"]);function i(e,t){return function(e){if(function(){if("undefined"==typeof navigator)return!1;let e=navigator;return"boolean"==typeof e.globalPrivacyControl&&!!e.globalPrivacyControl||[e.doNotTrack,e.msDoNotTrack].some(e=>!!e&&n.has(String(e).toLowerCase()))}()||function(){let e=window.doNotTrack;return!!e&&n.has(String(e).toLowerCase())}())return!1;let t=function(){var e,t;if("undefined"==typeof document)return"necessary";for(let r of null!==(t=null===(e=document.cookie)||void 0===e?void 0:e.split(";"))&&void 0!==t?t:[]){let e=r.trim();if(!e)continue;let[t,...n]=e.split("=");if("sv_consent"!==t)continue;let l=n.join("=");try{let e=decodeURIComponent(l).trim().toLowerCase();if("all"===e)return"all";if("necessary"===e)break}catch(t){let e=l.trim().toLowerCase();if("all"===e)return"all";if("necessary"===e)break}}return"necessary"}();if("necessary"===t&&!e.isNecessary)return!1;let r={name:e.name,detail:e.detail,timestamp:new Date().toISOString(),consent:t};try{let t=e.transport(r);return!1!==t}catch(e){return!1}}({name:e,detail:t,isNecessary:l.has(e),transport:e=>{let{name:t,detail:r,timestamp:n}=e,l={...r,name:t,timestamp:n},i=new CustomEvent(t,{detail:l,bubbles:!1});return window.dispatchEvent(i),!0}})}},7210:function(e,t,r){r.r(t),r.d(t,{deckAdapter:function(){return s}});var n=r(5046),l=r(518);function i(e){return e?"discrete":"animated"}function a(e){let{map:t,glOptions:r,layers:n,viewState:l,...i}=e;return{...i,layers:Array.isArray(n)?n.slice():[],...r&&"object"==typeof r?{glOptions:{...r}}:{},...l?{viewState:Array.isArray(l)?l.map(e=>e&&"object"==typeof e?{...e}:e):l&&"object"==typeof l?{...l}:l}:{},...t?{map:{...t}}:{}}}function o(e,t){var r,n;let i={...e};delete i.map;let a={powerPreference:"high-performance",failIfMajorPerformanceCaveat:!0,antialias:!0,...null!==(r=i.glOptions)&&void 0!==r?r:{}};return(0,l.gd)()||(a.preserveDrawingBuffer=null!==(n=a.preserveDrawingBuffer)&&void 0!==n&&n),i.glOptions=a,t.discrete&&(void 0!==i.transitions&&(i.transitions={}),i.viewState=function e(t){if(!t)return t;if(Array.isArray(t))return t.map(t=>e(t));if("object"==typeof t){let e={...t};return e.transitionDuration=0,delete e.transitionEasing,delete e.transitionInterpolator,delete e.transitionOptions,e}return t}(i.viewState)),t.overlay&&(i.viewState=void 0,void 0===i.controller&&(i.controller=!1),delete i.parent,delete i.canvas),i}async function c(e,t,c){var s,d,u,f;if(!(0,l.d_)()){let r=a(t),o=(0,l.Np)(e,{lib:"deck",title:"Режим совместимости",message:"Интерактивная 3D-визуализация недоступна без WebGL.",note:"Показан статичный режим без интерактивных слоёв."});return(0,n.Qe)("viz_fallback_engaged",{lib:"deck",motion:i(c.discrete),reason:"webgl",fallback:"static"}),{deck:null,overlay:null,map:null,spec:r,discrete:c.discrete,cleanup:o?[o]:[]}}let p=a(t),v=null===(s=p.map)||void 0===s?void 0:s.map;if(v&&"function"==typeof v.addControl&&"function"==typeof v.removeControl){let{MapboxOverlay:e}=await r.e(470).then(r.bind(r,9470)),t=o(p,{discrete:c.discrete,overlay:!0}),l=new e({interleaved:null===(u=null===(d=p.map)||void 0===d?void 0:d.interleaved)||void 0===u||u,...t}),a=[];try{v.addControl(l,null===(f=p.map)||void 0===f?void 0:f.position),a.push(()=>{v.removeControl(l)})}catch(e){(0,n.Qe)("viz_error",{lib:"deck",motion:i(c.discrete),reason:"mount",error:e instanceof Error?e.message:String(e)})}return{deck:null,overlay:l,map:v,spec:p,discrete:c.discrete,cleanup:a}}let{Deck:y}=await r.e(985).then(r.bind(r,7985));return{deck:new y({...o(p,{discrete:c.discrete,overlay:!1}),parent:e}),overlay:null,map:null,spec:p,discrete:c.discrete,cleanup:[]}}let s={mount:async(e,t,r)=>c(e,t,r),applyState(e,t,r){var n,l,i,c;let s=e.spec;if(!s)return;let d=a(s),u=a("function"==typeof t?t(d):t);e.spec=u,e.discrete=r.discrete;let f=!!e.overlay,p=o(u,{discrete:r.discrete,overlay:f});if(e.overlay){null===(n=(l=e.overlay).setProps)||void 0===n||n.call(l,p);return}e.deck&&(null===(i=(c=e.deck).setProps)||void 0===i||i.call(c,p))},destroy(e){for(var t,r,n,l;e.cleanup.length>0;){let t=e.cleanup.pop();try{null==t||t()}catch(e){}}try{null===(r=e.overlay)||void 0===r||null===(t=r.finalize)||void 0===t||t.call(r)}catch(e){}try{null===(l=e.deck)||void 0===l||null===(n=l.finalize)||void 0===n||n.call(l)}catch(e){}e.deck=null,e.overlay=null,e.map=null,e.spec=null,e.discrete=!1}};t.default=s},518:function(e,t,r){r.d(t,{Np:function(){return s},d_:function(){return c},gd:function(){return o}});let n=null,l=null;function i(){return"undefined"==typeof document?null:document}function a(e,t){try{return e.getContext(t)}catch(e){return null}}let o=()=>null!==n?n:n=function(e){let t=i();if(!t)return!1;let r=t.createElement("canvas");r.width=1,r.height=1;try{let t=a(r,e);return null!==t}finally{"function"==typeof r.remove&&r.remove()}}("webgl2"),c=()=>{if(null!==l)return l;if(o())return l=!0,!0;let e=i();if(!e)return l=!1,!1;let t=e.createElement("canvas");t.width=1,t.height=1;try{let e=a(t,"webgl")||a(t,"experimental-webgl");return l=null!==e}finally{"function"==typeof t.remove&&t.remove()}};function s(e,t){var r,n,l,a;let o=null!==(a=e.ownerDocument)&&void 0!==a?a:i();if(!o)return()=>{};for(;e.firstChild;)e.removeChild(e.firstChild);e.setAttribute("data-viz-fallback","webgl"),e.setAttribute("data-viz-fallback-lib",t.lib);let c=o.createElement("div");c.className="viz-compat-fallback",c.dataset.vizFallback="webgl",c.dataset.vizFallbackLib=t.lib,c.setAttribute("role","group"),c.setAttribute("aria-label",null!==(r=t.title)&&void 0!==r?r:"Режим совместимости"),c.style.display="flex",c.style.flexDirection="column",c.style.alignItems="center",c.style.justifyContent="center",c.style.gap="0.75rem",c.style.width="100%",c.style.height="100%",c.style.minHeight="220px",c.style.boxSizing="border-box",c.style.padding="1.5rem",c.style.borderRadius="0.75rem",c.style.border="1px solid rgba(148, 163, 184, 0.35)",c.style.background="linear-gradient(135deg, rgba(15, 23, 42, 0.04), rgba(148, 163, 184, 0.08))",c.style.color="rgba(15, 23, 42, 0.78)",c.style.textAlign="center",c.style.fontSize="0.9375rem",c.style.lineHeight="1.5";let s=o.createElement("div");s.setAttribute("aria-hidden","true"),s.style.width="min(260px, 90%)",s.style.aspectRatio="4 / 3",s.style.borderRadius="0.5rem",s.style.background="repeating-linear-gradient(45deg, rgba(148, 163, 184, 0.25) 0, rgba(148, 163, 184, 0.25) 12px, rgba(148, 163, 184, 0.1) 12px, rgba(148, 163, 184, 0.1) 24px)";let d=o.createElement("p");d.textContent=null!==(n=t.title)&&void 0!==n?n:"Режим совместимости",d.style.margin="0",d.style.fontWeight="600",d.style.fontSize="1rem";let u=o.createElement("p");u.textContent=t.message,u.style.margin="0",u.style.maxWidth="36ch";let f=o.createElement("p");return f.textContent=null!==(l=t.note)&&void 0!==l?l:"Интерактивная визуализация требует поддержки WebGL.",f.style.margin="0",f.style.maxWidth="40ch",f.style.fontSize="0.875rem",f.style.color="rgba(15, 23, 42, 0.62)",c.appendChild(s),c.appendChild(d),c.appendChild(u),c.appendChild(f),e.appendChild(c),()=>{c.parentNode===e&&e.removeChild(c),e.childNodes.length||(e.removeAttribute("data-viz-fallback"),e.removeAttribute("data-viz-fallback-lib"))}}}}]);