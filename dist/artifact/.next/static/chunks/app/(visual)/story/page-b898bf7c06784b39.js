(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[655],{9118:function(e,t,r){Promise.resolve().then(r.bind(r,7275))},7275:function(e,t,r){"use strict";r.d(t,{StorySteps:function(){return C}});var n=r(7573),i=r(7653);let a=null,o=null;function l(){try{if("function"!=typeof window.matchMedia)return null;if(a&&o===window.matchMedia)return a;return a=(o=window.matchMedia)("(prefers-reduced-motion: reduce)")}catch(e){return a=null,o=null,null}}function u(){var e;let t=l();return null!==(e=null==t?void 0:t.matches)&&void 0!==e&&e}function s(){return!1}function c(e){let t=l();if(!t)return()=>{};let r=()=>{e()};return"function"==typeof t.addEventListener?(t.addEventListener("change",r),()=>{t.removeEventListener("change",r)}):"function"==typeof t.addListener?(t.addListener(r),()=>{t.removeListener(r)}):()=>{}}var d=r(5046);function f(e){return e?"discrete":"animated"}function p(e){return"function"==typeof e}function m(e){return e instanceof Error?e:Error("string"==typeof e?e:"Unknown visualization error")}function v(e){if(e instanceof Error)return e.message||e.name;if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return String(e)}}function h(e){var t;let{activeStepId:r}=e,a=(0,i.useMemo)(()=>({activeStepId:null,history:[],ready:!1}),[]),o=(0,i.useRef)(null);o.current||(o.current=(globalThis.__fakeChart||(globalThis.__fakeChart={state:{activeStepId:null,history:[],ready:!1}}),globalThis.__fakeChart));let{ref:l,currentSpec:h,applyState:w,isReady:g}=function(e){let{adapter:t,lib:r,initialSpec:n}=e,{isReducedMotion:a}={isReducedMotion:(0,i.useSyncExternalStore)(c,u,s)},o=(0,i.useRef)(a);o.current=a;let l=(0,i.useRef)(p(t)?null:t),[h,y]=(0,i.useState)(l.current),w=(0,i.useRef)(null),[g,b]=(0,i.useState)(null),x=(0,i.useCallback)(()=>"function"==typeof n?n({discrete:o.current}):n,[n]),E=(0,i.useRef)(null);null===E.current&&(E.current=x());let[k,S]=(0,i.useState)(()=>E.current),I=(0,i.useRef)(E.current);I.current=k;let C=(0,i.useRef)(null),[_,N]=(0,i.useState)(!1),[L,R]=(0,i.useState)(null),z=(0,i.useRef)([]);(0,i.useEffect)(()=>{if(!p(t)){l.current=t,y(t),R(null);return}l.current=null,y(null);let e=!1;return(async()=>{try{let r=await t();if(e)return;let n=void 0!==r.default?r.default:r;l.current=n,y(n),R(null)}catch(t){if(e)return;R(m(t)),(0,d.Qe)("viz_error",{lib:r,motion:f(o.current),reason:"adapter-load",error:v(t)})}})(),()=>{e=!0}},[t,r]);let j=(0,i.useCallback)((e,t)=>{var n,i,a,u,s,c;let p=l.current;if(p)try{let l=o.current,u=f(l);if(t.wasFunction){let r=t.value;p.applyState(e,()=>r,{discrete:l})}else p.applyState(e,t.value,{discrete:l});(0,d.Qe)("viz_state",{lib:r,motion:u,stepId:null===(n=t.meta)||void 0===n?void 0:n.stepId,reason:null!==(a=null===(i=t.meta)||void 0===i?void 0:i.reason)&&void 0!==a?a:"update"})}catch(e){R(m(e)),(0,d.Qe)("viz_error",{lib:r,motion:f(o.current),stepId:null===(u=t.meta)||void 0===u?void 0:u.stepId,reason:null!==(c=null===(s=t.meta)||void 0===s?void 0:s.reason)&&void 0!==c?c:"apply",error:v(e)})}},[r]),P=(0,i.useCallback)((e,t)=>{var r;let n="function"==typeof e,i=n?e((r=function(e){if("function"==typeof globalThis.structuredClone)try{return globalThis.structuredClone(e)}catch(e){}return Array.isArray(e)?e.slice():{...e}}(I.current),"function"==typeof Object.freeze?Object.freeze(r):r)):e;I.current=i,S(i);let a={value:i,wasFunction:n,meta:t},o=C.current;if(o){j(o,a);return}z.current.push(a)},[j]),M=(0,i.useCallback)(e=>{if(0!==z.current.length)for(let t of z.current.splice(0,z.current.length))j(e,t)},[j]),q=(0,i.useCallback)(e=>{w.current=e,b(e)},[]);return(0,i.useEffect)(()=>{let e=x();C.current||(E.current=e,I.current=e,S(e))},[x]),(0,i.useEffect)(()=>{let e=l.current;if(!g||!e)return;let t=!1,n=null,i=function(t,i){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=f(o.current),{clearPending:u=!0}=a;try{e.destroy(t)}catch(e){(0,d.Qe)("viz_error",{lib:r,motion:l,reason:"destroy",error:v(e)})}finally{(0,d.Qe)("viz_destroyed",{lib:r,motion:l,reason:i}),C.current===t&&(C.current=null),n===t&&(n=null),u&&(z.current=[])}},a=o.current;return(0,d.Qe)("viz_init",{lib:r,motion:f(a),reason:"mount"}),(async()=>{try{let l=await e.mount(g,I.current,{discrete:a});if(t){i(l,"cancelled",{clearPending:!1});return}n=l,C.current=l,N(!0),(0,d.Qe)("viz_ready",{lib:r,motion:f(o.current)}),M(l)}catch(e){R(m(e)),(0,d.Qe)("viz_error",{lib:r,motion:f(o.current),reason:"mount",error:v(e)})}})(),()=>{t=!0,N(!1);let e=null!=n?n:C.current;e&&i(e,"destroy")}},[g,M,r,h]),(0,i.useEffect)(()=>{(0,d.Qe)("viz_motion_mode",{lib:r,motion:f(a),reason:"preference"})},[r,a]),(0,i.useEffect)(()=>{let e=C.current;e&&j(e,{value:I.current,wasFunction:!1,meta:{reason:"discrete-change"}})},[j,a]),(0,i.useMemo)(()=>({ref:q,elementRef:w,instance:C.current,currentSpec:k,isReady:_,discrete:a,error:L,applyState:P}),[P,k,L,_,q,a])}({adapter:y,lib:"fake",initialSpec:a});(0,i.useEffect)(()=>{let e=o.current;e&&(e.state=h)},[h]),(0,i.useEffect)(()=>()=>{let e=o.current;e&&(e.state={activeStepId:null,history:[],ready:!1})},[]),(0,i.useEffect)(()=>{let e=null!=r?r:null;w(t=>{let r=t.history.slice();return(0===r.length||r[r.length-1]!==e)&&r.push(e),{activeStepId:e,history:r,ready:!0}},{stepId:null!=e?e:void 0})},[r,w]);let b=(0,i.useMemo)(()=>h.activeStepId?"Active story step: ".concat(h.activeStepId):"No active story step",[h.activeStepId]);return(0,n.jsx)("div",{ref:l,className:"flex h-48 w-full items-center justify-center rounded-2xl border border-muted/30 bg-gradient-to-br from-primary/20 to-primary/5 text-center","data-active-step":null!==(t=h.activeStepId)&&void 0!==t?t:"","data-accepts-keys":"true","data-ready":h.ready||g?"true":"false","data-history":h.history.join(","),"data-testid":"fake-chart","aria-label":b,role:"application",tabIndex:0,children:(0,n.jsx)("span",{"aria-hidden":"true",className:"text-sm font-medium text-fg",children:h.activeStepId?"Step: ".concat(h.activeStepId):"Awaiting step"})})}async function y(){return(await r.e(435).then(r.bind(r,3435))).fakeChartAdapter}let w=[{id:"baseline",title:"Baseline momentum",description:"Summa Vision’s programmes start by mapping existing community assets and aligning local partners around a shared north star. Baseline data on education, health, and climate risks lets teams focus on leverage points rather than duplicating efforts."},{id:"activation",title:"Activation and pilots",description:"Pilot projects launch quickly to prove traction—think microgrid pilots, digital skills cohorts, or regenerative agriculture demos. Every activation publishes metrics publicly so peers can replicate what works."},{id:"scale",title:"Scaling with partners",description:"Once the pilot playbook is solid, it expands with regional delivery partners. Shared infrastructure, toolkits, and funding rails help municipalities and NGOs adopt the blueprint while adapting to local context."},{id:"impact",title:"Measuring real outcomes",description:"Impact dashboards track emissions avoided, jobs created, and resilience gains. Communities can subscribe to alerts for new data drops, and media kits make it easy to report on progress without waiting for quarterly summaries."}],g="step-",b="step";function x(e){var t,r,n,i;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=null!==(t=a.hashPrefix)&&void 0!==t?t:g,l=null!==(r=a.queryParam)&&void 0!==r?r:b,u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g;if(!e)return null;let r=e.startsWith("#")?e.slice(1):e;if(!r.startsWith(t))return null;let n=decodeURIComponent(r.slice(t.length).trim());return n.length>0?n:null}(null!==(n=e.hash)&&void 0!==n?n:"",o);if(u)return{stepId:u,source:"hash"};let s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b;if(!e)return null;let r=e.startsWith("?")?e.slice(1):e;if(!r)return null;let n=new URLSearchParams(r).get(t);if(!n)return null;let i=decodeURIComponent(n.trim());return i.length>0?i:null}(null!==(i=e.search)&&void 0!==i?i:"",l);return s?{stepId:s,source:"query"}:{stepId:null,source:null}}function E(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null!==(t=r.hashPrefix)&&void 0!==t?t:g,i="".concat(n).concat(e),a=document.getElementById(i);if(!a)return;let o=window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches?"auto":"smooth";try{a.scrollIntoView({behavior:o,block:"start"})}catch(e){a.scrollIntoView()}}var k=r(2689);function S(e,t){return Math.abs(e-t)>5e-4?t:e}let I="step-";function C(){var e,t;let r=(0,i.useMemo)(()=>w,[]),[a,o]=(0,i.useState)(null!==(t=null===(e=r[0])||void 0===e?void 0:e.id)&&void 0!==t?t:""),l=(0,i.useRef)({}),u=(0,i.useRef)(null),s=(0,i.useRef)(a),c=function(){let[e,t]=(0,i.useState)(()=>(0,k.yC)());return(0,i.useEffect)(()=>{let e=e=>{t(t=>S(t,null!=e?e:(0,k.yC)()))},r=t=>{if(t instanceof CustomEvent){let r=t.detail;if(r&&"number"==typeof r.scale){e(r.scale);return}}e()};return e(),window.addEventListener(k.Nr,r),()=>{window.removeEventListener(k.Nr,r)}},[]),(0,i.useEffect)(()=>{let e=()=>{t(e=>S(e,(0,k.yC)()))};return window.addEventListener("resize",e,{passive:!0}),window.addEventListener("orientationchange",e,{passive:!0}),()=>{window.removeEventListener("resize",e),window.removeEventListener("orientationchange",e)}},[]),e}(),d=(0,i.useMemo)(()=>{var e;return null!==(e=(0,k.tE)("-45% 0px -45% 0px",c))&&void 0!==e?e:"-45% 0px -45% 0px"},[c]);(0,i.useEffect)(()=>{s.current=a},[a]);let f=(0,i.useCallback)(e=>{var t;let n=r[e];if(!n)return!1;o(n.id),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};E(e,t)}(n.id,{hashPrefix:I});let i=l.current[n.id];return null==i||null===(t=i.focus)||void 0===t||t.call(i,{preventScroll:!0}),!0},[r]);!function(e){let{activeStepId:t,onStepFromUrl:r,mode:n="auto",throttleMs:a=300,hashPrefix:o,queryParam:l}=e,u=(0,i.useMemo)(()=>({hashPrefix:o,queryParam:l}),[o,l]),s=(0,i.useRef)(0),c=(0,i.useRef)(null),d=(0,i.useRef)(null),f=(0,i.useRef)("query"===n?"query":"hash"),p=(0,i.useRef)(!1),m=(0,i.useRef)(null),v=(0,i.useRef)(!1),h=(0,i.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=x(window.location,u);p.current||(m.current=t.source),t.source?f.current="auto"===n?t.source:f.current:"query"===n&&(f.current="query"),t.stepId?(d.current=t.stepId,null==r||r(t.stepId),E(t.stepId,u),e&&(c.current=t.stepId)):e&&(c.current=null)},[n,r,u]);(0,i.useEffect)(()=>{h(!1),p.current=!0},[h]),(0,i.useEffect)(()=>{let e=()=>h(!0),t=()=>h(!0);return window.addEventListener("popstate",e),window.addEventListener("hashchange",t),()=>{window.removeEventListener("popstate",e),window.removeEventListener("hashchange",t)}},[h]),(0,i.useEffect)(()=>{if(!p.current)return;if(d.current&&d.current===t){d.current=null;return}if(!v.current&&null===m.current){v.current=!0,c.current=t;return}let e=Date.now();if(e-s.current<a&&t===c.current)return;if(t===x(window.location,u).stepId){c.current=t;return}let r=function(e,t,r,n){var i,a;let o=null!==(i=n.hashPrefix)&&void 0!==i?i:g,l=null!==(a=n.queryParam)&&void 0!==a?a:b;return"query"===r?(t?e.searchParams.set(l,t):e.searchParams.delete(l),e.hash=""):(e.searchParams.delete(l),e.hash=t?"".concat(o).concat(encodeURIComponent(t)):""),e.toString()}(new URL(window.location.href),t,"auto"===n?f.current:"query"===n?"query":"hash",u);if(r===window.location.href){c.current=t;return}window.history.replaceState(window.history.state,"",r),s.current=e,c.current=t},[t,n,u,a])}({activeStepId:a,onStepFromUrl:(0,i.useCallback)(e=>{let t=r.findIndex(t=>t.id===e);t<0||f(t)},[f,r]),hashPrefix:I});let p=(0,i.useCallback)(e=>t=>{let r=l.current[e];u.current&&r&&u.current.unobserve(r),l.current[e]=t,u.current&&t&&u.current.observe(t)},[]);(0,i.useEffect)(()=>{let e=new IntersectionObserver(e=>{let t=e.filter(e=>e.isIntersecting).sort((e,t)=>e.boundingClientRect.top-t.boundingClientRect.top||t.intersectionRatio-e.intersectionRatio)[0];if(!t)return;let r=t.target.getAttribute("data-step-id");r&&r!==s.current&&(s.current=r,o(r))},{rootMargin:d,threshold:[0,.2,.4,.6,1]});return u.current=e,Object.values(l.current).forEach(t=>{t&&e.observe(t)}),()=>{e.disconnect(),u.current=null}},[d]);let m=(0,i.useCallback)(e=>{let t=r.findIndex(t=>t.id===e);t<0||f(t)},[f,r]),v=(0,i.useCallback)(e=>{let{key:t}=e,n=e.currentTarget.getAttribute("data-step-id");if(!n)return;let i=r.findIndex(e=>e.id===n);if(i<0)return;let a=!1;switch(t){case"ArrowDown":case"PageDown":a=f(i+1);break;case"ArrowUp":case"PageUp":a=f(i-1);break;case"Home":a=f(0);break;case"End":a=f(r.length-1)}a&&e.preventDefault()},[f,r]);return(0,n.jsxs)("div",{className:"mx-auto flex w-full max-w-6xl flex-col gap-12 px-4 py-16 lg:flex-row",children:[(0,n.jsx)("aside",{className:"lg:w-1/3",children:(0,n.jsxs)("div",{className:"sticky top-24 space-y-3 rounded-2xl border border-muted/30 bg-bg/70 p-6 backdrop-blur",children:[(0,n.jsx)(h,{activeStepId:a}),(0,n.jsx)("h2",{className:"text-xl font-semibold text-fg",children:"Story flow"}),(0,n.jsx)("p",{className:"text-sm text-muted",children:"Jump directly to a section or copy the link for a deep link. The active step syncs to the URL so refresh and share keep context."}),(0,n.jsx)("nav",{"aria-label":"Story steps",className:"space-y-2",children:r.map((e,t)=>{let r=e.id===a;return(0,n.jsxs)("button",{type:"button",onClick:()=>m(e.id),className:"w-full rounded-xl px-4 py-3 text-left transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary motion-reduce:transition-none ".concat(r?"bg-primary text-bg shadow-lg":"bg-transparent text-muted hover:bg-muted/10 focus-visible:text-fg"),"data-step-id":e.id,"aria-current":r?"step":void 0,children:[(0,n.jsxs)("span",{className:"text-xs font-semibold uppercase tracking-wide text-muted",children:["Step ",t+1]}),(0,n.jsx)("span",{className:"block text-base font-medium ".concat(r?"text-bg":"text-fg"),children:e.title})]},e.id)})})]})}),(0,n.jsx)("section",{className:"space-y-24 lg:w-2/3",children:r.map((e,t)=>(0,n.jsxs)("article",{id:"".concat(I).concat(e.id),"data-step-id":e.id,ref:p(e.id),className:"story-step-anchor scroll-mt-28 rounded-3xl border border-muted/20 bg-bg/80 p-8 shadow-sm transition motion-reduce:transition-none",tabIndex:0,onKeyDown:v,children:[(0,n.jsxs)("p",{className:"text-sm font-semibold uppercase tracking-wide text-muted",children:["Step ",t+1]}),(0,n.jsx)("h3",{className:"mt-3 text-3xl font-semibold text-fg",children:e.title}),(0,n.jsx)("p",{className:"mt-4 text-lg leading-7 text-muted",children:e.description})]},e.id))})]})}},5046:function(e,t,r){"use strict";r.d(t,{Qe:function(){return a}});let n=new Set(["1","yes","true"]),i=new Set(["viz_init","viz_ready","viz_error","viz_lazy_mount","viz_prefetch","viz_destroyed","viz_fallback_engaged","viz_data_mapped","viz_motion_mode","viz_spec_load"]);function a(e,t){return function(e){if(function(){if("undefined"==typeof navigator)return!1;let e=navigator;return"boolean"==typeof e.globalPrivacyControl&&!!e.globalPrivacyControl||[e.doNotTrack,e.msDoNotTrack].some(e=>!!e&&n.has(String(e).toLowerCase()))}()||function(){let e=window.doNotTrack;return!!e&&n.has(String(e).toLowerCase())}())return!1;let t=function(){var e,t;if("undefined"==typeof document)return"necessary";for(let r of null!==(t=null===(e=document.cookie)||void 0===e?void 0:e.split(";"))&&void 0!==t?t:[]){let e=r.trim();if(!e)continue;let[t,...n]=e.split("=");if("sv_consent"!==t)continue;let i=n.join("=");try{let e=decodeURIComponent(i).trim().toLowerCase();if("all"===e)return"all";if("necessary"===e)break}catch(t){let e=i.trim().toLowerCase();if("all"===e)return"all";if("necessary"===e)break}}return"necessary"}();if("necessary"===t&&!e.isNecessary)return!1;let r={name:e.name,detail:e.detail,timestamp:new Date().toISOString(),consent:t};try{let t=e.transport(r);return!1!==t}catch(e){return!1}}({name:e,detail:t,isNecessary:i.has(e),transport:e=>{let{name:t,detail:r,timestamp:n}=e,i={...r,name:t,timestamp:n},a=new CustomEvent(t,{detail:i,bubbles:!1});return window.dispatchEvent(a),!0}})}},2689:function(e,t,r){"use strict";r.d(t,{Nr:function(){return n},ZP:function(){return l},tE:function(){return c},yC:function(){return a}});let n="vv_scale_change";function i(e){return"number"==typeof e&&Number.isFinite(e)&&e>0}function a(){var e;let t=window.visualViewport;if(!t)return 1;let r=t.scale;if(i(r))return r;let n=window.innerHeight||(null===(e=document.documentElement)||void 0===e?void 0:e.clientHeight)||0,a=i(t.height)?t.height:0;if(a>0&&n>0){let e=n/a;if(i(e))return e}return 1}function o(e,t){window.dispatchEvent(new CustomEvent(n,{detail:{scale:e,previousScale:t}}))}function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"--vv-scale";if("undefined"==typeof document)return()=>{};let t=t=>{document.documentElement.style.setProperty(e,"".concat(t))},r=a();t(r),o(r,r);let n=()=>{let e=a();if(!i(e)||.001>=Math.abs(e-r))return;let n=r;r=e,t(e),o(e,n)},l=window.visualViewport;return l&&"function"==typeof l.addEventListener&&(l.addEventListener("resize",n),l.addEventListener("scroll",n)),window.addEventListener("resize",n,{passive:!0}),window.addEventListener("orientationchange",n,{passive:!0}),()=>{l&&"function"==typeof l.removeEventListener&&(l.removeEventListener("resize",n),l.removeEventListener("scroll",n)),window.removeEventListener("resize",n),window.removeEventListener("orientationchange",n)}}let u=/^(-?\d*(?:\.\d+)?)(px|%)$/i;function s(e){return 1e-8>Math.abs(e)?0:e}function c(e,t){if(!e||!i(t)||.001>=Math.abs(t-1))return e;let r=e.trim().split(/\s+/);return 0===r.length?e:r.map(e=>{let r=e.match(u);if(!r)return e;let n=Number.parseFloat(r[1]);return Number.isFinite(n)&&0!==n?"".concat(function(e){let t=Number(s(e).toFixed(4));return"".concat(s(t))}(n/t)).concat(r[2]):"0".concat(r[2])}).join(" ")}}},function(e){e.O(0,[293,286,744],function(){return e(e.s=9118)}),_N_E=e.O()}]);