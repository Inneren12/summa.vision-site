(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[364],{5718:function(e,a,t){Promise.resolve().then(t.bind(t,714)),Promise.resolve().then(t.bind(t,7114))},714:function(e,a,t){"use strict";t.d(a,{default:function(){return n}});var r=t(7573),l=t(1398);function n(e){let{title:a,description:t,filters:n,children:s}=e;return(0,r.jsx)(l.Mw,{children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("header",{className:"space-y-2",children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold text-neutral-900",children:a}),t?(0,r.jsx)("p",{className:"max-w-2xl text-sm text-neutral-600",children:t}):null]}),(0,r.jsxs)("div",{className:"grid gap-6 lg:grid-cols-[minmax(0,280px)_minmax(0,1fr)]",children:[n?(0,r.jsx)("aside",{"aria-label":"Фильтры",className:"lg:sticky lg:top-20",children:n}):null,(0,r.jsx)("main",{id:"dash-main",tabIndex:-1,className:"space-y-6 focus:outline-none",children:s})]})]})})}},7114:function(e,a,t){"use strict";t.d(a,{default:function(){return d}});var r=t(7573),l=t(7653),n=t(1398);let s=[{value:"",label:"Все страны"},{value:"CA",label:"Канада"},{value:"US",label:"США"},{value:"MX",label:"Мексика"}],i=[{value:"energy",label:"Энергетика"},{value:"transport",label:"Транспорт"},{value:"finance",label:"Финансы"},{value:"agriculture",label:"Агро"}],o=n.gV.min,c=n.gV.max,u=e=>Math.min(Math.max(e,o),c);function d(){var e,a,t;let d=(0,l.useId)(),m=(0,l.useId)(),{state:h,setState:x,reset:f}=(0,n.ZS)(),[g,v]=null!==(e=h.range)&&void 0!==e?e:n.eW,p=u(g),b=u(v);return(0,r.jsxs)("form",{"aria-label":"Фильтры дашборда",className:"space-y-4 rounded-lg border border-neutral-200 bg-white p-4 shadow-sm",onSubmit:e=>e.preventDefault(),children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("label",{className:"text-sm font-medium",htmlFor:"dash-filter-country",children:"Страна"}),(0,r.jsx)("select",{id:"dash-filter-country","aria-controls":"dash-main",className:"w-full rounded border border-neutral-300 bg-white p-2 text-sm",value:null!==(a=h.country)&&void 0!==a?a:"",onChange:e=>{let a=e.target.value;x(e=>({...e,country:a||void 0}))},children:s.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("label",{className:"text-sm font-medium",htmlFor:"dash-filter-sectors",children:"Сектора"}),(0,r.jsx)("select",{id:"dash-filter-sectors",multiple:!0,size:Math.min(i.length,5),"aria-describedby":d,"aria-controls":"dash-main",className:"w-full rounded border border-neutral-300 bg-white p-2 text-sm",value:h.sectors,onChange:e=>{let a=Array.from(e.target.selectedOptions).map(e=>e.value);x(e=>({...e,sectors:a}))},children:i.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,r.jsx)("p",{id:d,className:"text-xs text-neutral-500",children:"Используйте Ctrl/Cmd или Shift для выбора нескольких значений."})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("label",{className:"text-sm font-medium",htmlFor:"dash-filter-date",children:"Дата обновления"}),(0,r.jsx)("input",{id:"dash-filter-date","aria-controls":"dash-main",type:"date",className:"w-full rounded border border-neutral-300 p-2 text-sm",value:null!==(t=h.date)&&void 0!==t?t:"",onChange:e=>{let a=e.target.value;x(e=>({...e,date:a||void 0}))}})]}),(0,r.jsxs)("fieldset",{"aria-describedby":m,className:"space-y-2",children:[(0,r.jsx)("legend",{className:"text-sm font-medium",children:"Диапазон лет"}),(0,r.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,r.jsxs)("label",{className:"flex flex-col gap-1 text-xs",htmlFor:"dash-filter-range-start",children:[(0,r.jsx)("span",{className:"font-semibold text-neutral-700",children:"Начало"}),(0,r.jsx)("input",{id:"dash-filter-range-start","aria-controls":"dash-main",type:"range",min:o,max:c,step:1,value:p,onChange:e=>{let a=u(Number.parseInt(e.target.value,10));x(e=>{var t;let[,r]=null!==(t=e.range)&&void 0!==t?t:n.eW,l=u(r);return{...e,range:[Math.min(a,l),Math.max(a,l)]}})}}),(0,r.jsx)("span",{"aria-live":"polite",className:"text-neutral-600",children:p})]}),(0,r.jsxs)("label",{className:"flex flex-col gap-1 text-xs",htmlFor:"dash-filter-range-end",children:[(0,r.jsx)("span",{className:"font-semibold text-neutral-700",children:"Конец"}),(0,r.jsx)("input",{id:"dash-filter-range-end","aria-controls":"dash-main",type:"range",min:o,max:c,step:1,value:b,onChange:e=>{let a=u(Number.parseInt(e.target.value,10));x(e=>{var t;let[r]=null!==(t=e.range)&&void 0!==t?t:n.eW,l=u(r);return{...e,range:[Math.min(l,a),Math.max(l,a)]}})}}),(0,r.jsx)("span",{"aria-live":"polite",className:"text-neutral-600",children:b})]})]}),(0,r.jsxs)("p",{id:m,className:"text-xs text-neutral-500",children:["Подберите диапазон годов. Значения по умолчанию: ",n.eW[0],"–",n.eW[1],"."]})]}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)("button",{type:"button","aria-label":"Сбросить фильтры",className:"rounded border border-neutral-300 px-3 py-2 text-sm font-medium text-neutral-700 transition-colors hover:bg-neutral-100",onClick:f,children:"Сбросить"})})]})}},1398:function(e,a,t){"use strict";t.d(a,{eW:function(){return i},gV:function(){return s},Mw:function(){return f},ZS:function(){return g}});var r=t(7573),l=t(534),n=t(7653);let s={min:2010,max:2030},i=[2018,2024],o=()=>({country:void 0,sectors:[],date:void 0,range:[...i]}),c=(0,n.createContext)(null),u=e=>"f[".concat(e,"]"),d=e=>Array.from(e.keys()).some(e=>e.startsWith("f["));function m(e){var a,t;let r=null!==(a=e.get(u("country")))&&void 0!==a?a:void 0,l=null!==(t=e.get(u("date")))&&void 0!==t?t:void 0,n=function(e){if(!e)return null;let[a,t]=e.split(".."),r=Number.parseInt(null!=a?a:"",10),l=Number.parseInt(null!=t?t:"",10);return Number.isNaN(r)||Number.isNaN(l)?null:[Math.min(r,l),Math.max(r,l)]}(e.get(u("range")));return{country:r,date:l,sectors:Array.from(new Set(e.getAll(u("sector")).flatMap(e=>e.split(",").map(e=>e.trim()).filter(Boolean)))),range:null!=n?n:[...i]}}function h(e,a){return e.country===a.country&&e.date===a.date&&e.range[0]===a.range[0]&&e.range[1]===a.range[1]&&e.sectors.length===a.sectors.length&&e.sectors.every((e,t)=>e===a.sectors[t])}function x(e){var a;let[t,r]=null!==(a=e.range)&&void 0!==a?a:i,l=Math.min(Math.max(t,s.min),s.max),n=Math.min(Math.max(r,s.min),s.max),o=Array.from(new Set(e.sectors.filter(Boolean)));return{country:e.country||void 0,date:e.date||void 0,sectors:o,range:[Math.min(l,n),Math.max(l,n)]}}function f(e){let{children:a,initialState:t}=e,s=(0,l.useSearchParams)(),f=(0,l.usePathname)(),g=(0,l.useRouter)(),v=(0,n.useMemo)(()=>x(null!=t?t:o()),[t]),[p,b]=(0,n.useState)(()=>d(s)?x(m(s)):v);(0,n.useEffect)(()=>{if(!d(s)){b(e=>h(e,v)?e:v);return}let e=x(m(s));b(a=>h(a,e)?a:e)},[v,s]);let N=(0,n.useCallback)(e=>{b(a=>{let t=x("function"==typeof e?e(a):e),r=(function(e,a){let t=new URLSearchParams(e.toString());return Array.from(t.keys()).filter(e=>e.startsWith("f[")).forEach(e=>t.delete(e)),a.forEach((e,a)=>{t.append(a,e)}),t})(s,function(e){let a=new URLSearchParams;return e.country&&a.set(u("country"),e.country),e.date&&a.set(u("date"),e.date),e.sectors.length>0&&e.sectors.forEach(e=>a.append(u("sector"),e)),(e.range[0]!==i[0]||e.range[1]!==i[1])&&a.set(u("range"),"".concat(e.range[0],"..").concat(e.range[1])),a}(t)).toString();if(r!==s.toString()){let e="".concat(f).concat(r?"?".concat(r):"");g.replace(e,{scroll:!1})}return t})},[f,g,s]),y=(0,n.useCallback)((e,a)=>{N(t=>({...t,[e]:a}))},[N]),j=(0,n.useCallback)(()=>{N(()=>v)},[v,N]),M=(0,n.useMemo)(()=>({state:p,setState:N,setFilter:y,reset:j}),[j,y,N,p]);return(0,r.jsx)(c.Provider,{value:M,children:a})}function g(){let e=(0,n.useContext)(c);if(!e)throw Error("useDashState must be used within a DashStateProvider");return e}}},function(e){e.O(0,[293,286,744],function(){return e(e.s=5718)}),_N_E=e.O()}]);