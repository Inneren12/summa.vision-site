"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[171,23],{6023:function(e,t,n){n.r(t),n.d(t,{ensureConsentManager:function(){return A},getConsentState:function(){return b},isServiceAllowed:function(){return _},showConsentManager:function(){return P},subscribeToConsent:function(){return I}});let r=["analytics","vitals","share"],a={version:2,elementID:"klaro",styling:{theme:["light","topbar"]},storageName:"sv_klaro",cookieExpiresAfterDays:180,default:!1,mustConsent:!1,lang:"ru",privacyPolicy:"/policies/privacy",translations:{ru:{consentModal:{title:"Настройки приватности",description:"Выберите, какие события можно отправлять. Мы не используем сторонние трекеры и храним данные обезличено."},consentNotice:{description:"Используем только согласованные события и сохраняем их в агрегированном виде.",learnMore:"Настроить"},privacyPolicy:{text:"Подробнее — в политике конфиденциальности"},ok:"Только необходимые",acceptSelected:"Принять выбранное",acceptAll:"Принять всё",purposes:{analytics:"Аналитика истории",performance:"Показатели качества",engagement:"Взаимодействия"},services:{analytics:{description:"Отслеживает просмотры историй и шагов, чтобы понимать, какие материалы востребованы."},vitals:{description:"Отправляет агрегированные Web Vitals (LCP, CLS, INP) без персональных данных."},share:{description:"Фиксирует клики по кнопке \xabПоделиться\xbb, чтобы оценивать вовлечённость."}}},en:{consentModal:{title:"Privacy preferences",description:"Choose which events we may record. No third-party trackers are loaded and all data stays aggregated."},consentNotice:{description:"We only record aggregated events after you give explicit consent.",learnMore:"Customise"},privacyPolicy:{text:"Read more in the privacy policy"},ok:"Necessary only",acceptSelected:"Accept selection",acceptAll:"Accept all",purposes:{analytics:"Story analytics",performance:"Quality metrics",engagement:"Engagement"},services:{analytics:{description:"Tracks story and step views so we can improve the content that resonates the most."},vitals:{description:"Sends aggregated Web Vitals (LCP, CLS, INP) without any personal data."},share:{description:"Captures share button clicks to understand engagement levels."}}}},services:[{name:"analytics",title:"Story analytics",purposes:["analytics"],default:!1},{name:"vitals",title:"Web Vitals",purposes:["performance"],default:!1},{name:"share",title:"Sharing interactions",purposes:["engagement"],default:!1}]},o=void 0!==n(8571)&&!1,i=a.storageName||"klaro",s=()=>({analytics:!1,vitals:!1,share:!1}),l=new Set,c=!1,u=null,d=null,p=s(),y=e=>{var t,n;if("undefined"==typeof document)return null;for(let r of null!==(n=null===(t=document.cookie)||void 0===t?void 0:t.split(";"))&&void 0!==n?n:[]){let t=r.trim();if(!t)continue;let[n,...a]=t.split("=");if(n===e)return a.join("=")}return null},f=e=>{if(e)try{let t=decodeURIComponent(e),n=JSON.parse(t);if(!n||"object"!=typeof n)return;let a=s();for(let e of r){let t=n[e];a[e]=!!t}return a}catch(e){return}},v=()=>"undefined"==typeof location?"":"https:"===location.protocol?"; Secure":"",h=e=>{if("undefined"==typeof document)return;let t=r.some(t=>e[t]);document.cookie="".concat("sv_consent","=").concat(t?"all":"necessary","; Max-Age=").concat(15552e3,"; Path=/; SameSite=Lax").concat(v())},m=e=>{l.forEach(t=>{try{t(e)}catch(e){}})},g=e=>{let t=!1;for(let n of r)if(p[n]!==e[n]){t=!0;break}h(p=e),t&&m(p)},k=e=>{if(!e)return s();let t=s();for(let a of r){var n;t[a]=!!(null===(n=e.consents)||void 0===n?void 0:n[a])}return t},C={update(e,t){("consents"===t||"saveConsents"===t)&&g(k(e))}},w=e=>{e&&!c&&(e.watch(C),c=!0,g(k(e)))},N=async()=>u||(o?null:u=n.e(404).then(n.t.bind(n,2810,23)).then(e=>e).catch(()=>null)),S=async()=>d||(o?null:d=N().then(e=>{if(!e)return null;try{e.setup(a);let t=e.getManager(a);return w(t),t}catch(e){return null}}));p="undefined"==typeof document?s():f(y(i))||s(),"undefined"!=typeof document&&h(p);let b=()=>({...p}),_=e=>p[e],I=e=>(l.add(e),()=>{l.delete(e)}),A=async()=>{await S()},P=async()=>{if(o)return;let e=await N();if(e){await S();try{e.show(a)}catch(e){}}}},9171:function(e,t,n){n.r(t),n.d(t,{recordStoryEvent:function(){return C},recordVitalMetric:function(){return w}});var r,a,o,i,s=n(6023),l=n(8571);let c=void 0!==l&&!1,u=null!==(o=null===(r=l.env.NEXT_PUBLIC_ANALYTICS_DOMAIN)||void 0===r?void 0:r.trim())&&void 0!==o?o:"",d=null!==(i=null===(a=l.env.NEXT_PUBLIC_ANALYTICS_API_HOST)||void 0===a?void 0:a.trim())&&void 0!==i?i:"",p={story_view:"analytics",step_view:"analytics",step_exit:"analytics",share_click:"share",progress_render:null,progress_click:null},y=null,f=()=>!0,v=()=>{if("undefined"!=typeof navigator){let e=navigator;if("boolean"==typeof e.globalPrivacyControl&&e.globalPrivacyControl||[e.doNotTrack,e.msDoNotTrack].some(e=>!!e&&["1","yes","true"].includes(String(e).toLowerCase())))return!0}{let e=window.doNotTrack;if(e&&["1","yes","true"].includes(String(e).toLowerCase()))return!0}return!1},h=async()=>y||(f()&&!c&&u?y=n.e(715).then(n.bind(n,4715)).then(e=>({trackEvent:(0,e.default)({domain:u,apiHost:d||void 0,hashMode:!1,trackLocalhost:!1}).trackEvent})).catch(()=>null):null),m=async e=>{let t=await h();if(t)try{await e(t)}catch(e){}},g=e=>Number.isFinite(e)?Number.parseFloat(e.toFixed(2)):0,k=e=>!(!f()||c||v())&&!!e&&(0,s.isServiceAllowed)(e),C=(e,t)=>{k(p[e])&&m(n=>{let r={story:t.storyId};"number"==typeof t.stepCount&&(r.steps=t.stepCount),t.stepId&&(r.step=t.stepId),"number"==typeof t.stepIndex&&Number.isFinite(t.stepIndex)&&(r.index=t.stepIndex),n.trackEvent(e,{props:r})})},w=e=>{k("vitals")&&m(t=>{let n={metric:e.metric,value:g(e.value)};e.rating&&(n.rating=e.rating),t.trackEvent("vitals",{props:n})})}}}]);